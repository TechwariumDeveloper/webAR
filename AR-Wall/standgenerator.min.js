!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],e):e((t=t||self).generator={},t.THREE)}(this,function(t,D){"use strict";function n(t){function e(t,e){void 0===e&&(e=1),void 0===s[t]?s[t]=e:s[t]+=e}function a(){var t,e=new Array,a=new Array;for(t in s)0<s[t]&&(void 0!==o[t]?e.push(o[t]):e.push(t),a.push(Math.ceil(s[t])));return"?products="+e.join(",")+"&quantity="+a.join(",")}var s=new Object,o=c(),i=t.width;t.length,"I"==t.wallsName&&(i=t.length,t.width);for(var n=0;n<t.group.children.length;n++){!0===t.group.children[n].isLightBox&&(e(t.group.children[n].userData.name),void 0!==t.group.children[n].userData.foot&&e("FUSSPLATTEN EINSEITIG",t.group.children[n].userData.foot));for(var r=0;r<t.group.children[n].children.length;r++)!0===t.group.children[n].children[r].isLightBox&&(e(t.group.children[n].children[r].userData.name),void 0!==t.group.children[n].children[r].userData.foot&&e("FUSSPLATTEN EINSEITIG",t.group.children[n].children[r].userData.foot))}switch(t.wallsName,i){case 1:0;break;case 2:0;break;case 3:0;break;case 4:0;break;case 5:0;break;case 6:0}return 0<t.cabin&&0,"L"==t.wallsName?e("SYSTEMVERBINDER FLEX",1):"U"==t.wallsName&&e("SYSTEMVERBINDER FLEX",2),0<t.cabin&&1<t.width&&1<t.length&&1<t.walls&&e("TÜR SET",1),0<t.counter&&1<t.length&&e("GO COUNTER L WHITE",t.counter),1==t.counter?0:2==t.counter&&0,$("#oredr-info").html(a()),{cart:s,getCart:a()}}function a(t){var e,a=n(t).cart,s=0;for(e in a)0<a[e]&&void 0!==t.arr_cost[e]&&(s+=parseInt(a[e])*parseFloat(t.arr_cost[e]));let o=[];-1!==s.toString().indexOf(".")?(o=s.toString().split("."),1===o[1].length&&(o[1]=o[1].toString()+"0")):(o[0]=s,o[1]="00");var i=`<div><span>Preis: </span><span class='price-big'>${o[0]}<span class='price-small'>${o[1]}</span>€</span></span></div><div><div>UVP exkl. MwSt.</div><div class='text-small'>Spezielle Reseller Konditionen werden im Warenkorb aktualisiert</div></div>`;$("#price").html(i)}function y(t,e,a){var s=new D.MeshStandardMaterial({color:13421772}),o=new D.BoxBufferGeometry(.16,.01,.16);(s=new D.Mesh(o,s)).position.y=-a/2,s.position.z=S.depthWall,s.position.x=e,t.add(s)}function P(t,e,a){var s=100*t,t=100<s?1.5:1;return{name:"GO LIGHTBOX "+(s=85==s?"085":s)+" "+100*e,foot:t=void 0!==a?a:t}}function r(t,e,a,s,o,i,n){var r=new D.BoxBufferGeometry(e-.01,a,S.depthWall),l=new D.MeshStandardMaterial({color:16777215}),h=(new D.MeshStandardMaterial({color:13421772}),new D.MeshStandardMaterial);const d=new D.TextureLoader;var c,p,u=new D.MeshBasicMaterial({map:d.load("img/musterTexturPixlipgo.jpg")}),f=2448*e/(3264*a);1<f?(u.map.repeat.set(f=1,c=3264*a/(2448*e)),u.map.offset.y=(c-1)/2*-1):(u.map.repeat.set(f=2448*e/(3264*a),c=1),u.map.offset.x=(f-1)/2*-1),!1!==S.wallpaper&&(p=new D.CanvasTexture((c=S.wallpaper,p=document.createElement("CANVAS"),f=p.getContext("2d"),p.width=c.width,p.height=c.height,f.drawImage(c,0,0),p)),h.map=p,h.map.offset.set(n/(S.wallpaper.width/S.canvasScale),0),h.map.repeat.set(e/(S.wallpaper.width/S.canvasScale),a/(S.wallpaper.height/S.canvasScale)),h.needsUpdate=!0);var g=new D.Mesh(r,[l,l,l,l,u,u]);g.position.y=a/2,g.position.x=s,g.position.z=o,g.rotateY(i);var w=new D.MeshStandardMaterial({color:16724736});w.transparent=!0,w.opacity=0,e=Math.round(100*e)/100;var b=new Array;0<S.cabin&&2==S.walls?0==i?1.85==e?b=[1,.85]:2.85==e?b=[1,1.85]:3.85==e?b=[2,1.85]:4.85==e?b=[2,1,1.85]:5.85==e&&(b=[2,1.85,2]):1.85==e?b=[1,.85]:2.85==e?b=[1,1.85]:3.85==e?b=[1,.85,2]:4.85==e?b=[1,1.85,2]:5.85==e&&(b=[1,.85,2,2]):0<S.cabin&&3==S.walls?0==i?1.7==e?b=[.85,.85]:2.7==e?b=[.85,1.85]:3.7==e?b=[1.85,1.85]:4.7==e?b=[2,.85,1.85]:5.7==e&&(b=[2,1.85,1.85]):i==Math.PI/2?1.85==e?b=[1,.85]:2.85==e?b=[1,1.85]:3.85==e?b=[1,.85,2]:4.85==e?b=[1,1.85,2]:5.85==e&&(b=[1,.85,2,2]):1.85==e?b=[1.85]:2.85==e?b=[1,1.85]:3.85==e?b=2==S.length?[1,.85,2]:[1.85,2]:4.85==e?b=[1,1.85,2]:5.85==e&&(b=2==S.length?[1,.85,2,2]:[1.85,2,2]):.85==e?b=[.85]:1==e?b=[1]:1.7==e?b=[.85,.85]:1.85==e?b=[1.85]:2==e?b=[2]:2.7==e?b=[1.85,.85]:2.85==e?b=[.85,2]:3==e?b=[2,1]:3.7==e?b=[1.85,1.85]:3.85==e?b=[1.85,2]:4==e?b=[2,2]:4.7==e?b=[1.85,1,1.85]:4.85==e?b=[2,.85,2]:5==e?b=[2,1,2]:5.7==e?b=[1.85,2,1.85]:5.85==e?b=[2,1.85,2]:6==e&&(b=[2,2,2]);var m=!1;i==Math.PI/2&&(m=!0);for(var j=0,v=0;v<b.length;v++){var x=new D.BoxBufferGeometry(b[v],a+.01,S.depthWall+.01),O=new D.Mesh(x,w);O.userData=P(b[v],a),O.name=O.userData.name,O.isLightBox=!0,O.position.x=m?e/2-b[v]/2-j:-e/2+b[v]/2+j,j+=b[v],1<b[v]&&y(g,O.position.x,a),y(g,O.position.x-b[v]/2+.09,a),y(g,O.position.x+b[v]/2-.09,a);x=new D.BoxHelper(O,4342338);g.add(O),g.add(x)}t.add(g)}function l(t,e,a){var s=new D.BoxBufferGeometry(S.counterProps.width,S.counterProps.height,S.counterProps.depth),o=new D.MeshStandardMaterial({color:16777215});new D.MeshStandardMaterial({color:16701285}).color=new D.Color(S.wallColor1);const i=new D.TextureLoader;var n,r=new D.MeshBasicMaterial({map:i.load("img/musterTexturPixlipgo.jpg")}),l=2448*S.counterProps.width/(3264*S.counterProps.height);return 1<l?(n=3264*S.counterProps.height/(2448*S.counterProps.width),r.map.repeat.set(l=1,n),r.map.offset.y=(n-1)/2*-1):(l=2448*S.counterProps.width/(3264*S.counterProps.height),r.map.repeat.set(l,n=1),r.map.offset.x=(l-1)/2*-1),o=new D.Mesh(s,[o,o,o,o,r,r]),r=new D.BoxHelper(o,4342338),o.add(r),o.position.x=t-S.depthWall,o.position.y=S.counterProps.height/2,o.position.z=e-S.depthWall,o.rotateY(a),o}function h(t){var e="textOffset";t.fillStyle=S.fontColor,t.font=S.textSize/5+"px "+S.font;var a=S.textWall.split("\n"),s=0,o=S.textSize/5,i=S.dragOffset[e][0]*S.canvasScale;void 0!==S.dragObj[e]&&void 0!==S.dragObj[e].userData&&(i+=S.dragObj[e].userData.wallOffset*S.canvasScale);for(var n=S.dragOffset[e][1]*S.canvasScale,r=0;r<a.length;r++)t.fillText(a[r],i,n+(r+1)*o),t.measureText(a[r]).width>s&&(s=t.measureText(a[r]).width);S.printWall[e]={},S.printWall[e].imageX=s,S.printWall[e].imageY=S.textSize/5*a.length}function d(t,e){var a,s,o,i,n,r;!1!==S.fileLogo&&"logoOffset"==t||""!=S.textWall&&"textOffset"==t?(S.isCreateObj[t]=!1,void(r=a=0)!==S.dragObj[t]&&void 0!==S.dragObj[t].userData&&(a=S.dragObj[t].userData.wallOffset),void 0!==S.dragObj[t]&&void 0!==S.dragObj[t].userData&&(r=S.dragObj[t].userData.wall),S.dragGroup.remove(S.dragObj[t]),s=S.printWall[t].imageX,o=S.printWall[t].imageY,i=new D.BoxGeometry(s/S.canvasScale,o/S.canvasScale,.01),(n=new D.MeshStandardMaterial({color:16724736})).transparent=!0,n.opacity=0,n=new D.Mesh(i,n),(S.dragObj[t]=n).userData.name=t,n.userData.wallOffset=a,n.userData.x=s/S.canvasScale,n.userData.y=o/S.canvasScale,1==r?e=0:2==r?e=-Math.PI/2:3==r&&(e=Math.PI),r="textOffset"==t?.015:.01,e===Math.PI/2?(n.userData.wall=0,n.userData.offsetX=S.width/2-n.userData.x/2-S.depthWall,n.userData.offsetZ=-S.length/2+r,n.position.x=n.userData.offsetZ,n.position.z=n.userData.offsetX-S.dragOffset[t][0]):0===e?(n.userData.wall=1,n.userData.offsetX=-S.width/2+r,n.userData.offsetZ=-S.length/2+n.userData.x/2,n.position.x=n.userData.offsetZ+S.dragOffset[t][0],n.position.z=n.userData.offsetX):e===-Math.PI/2?(n.userData.wall=2,n.userData.offsetX=-S.width/2+n.userData.x/2,n.userData.offsetZ=S.length/2-r-S.depthWall,n.position.x=n.userData.offsetZ,n.position.z=n.userData.offsetX+S.dragOffset[t][0]):e===Math.PI&&(n.userData.wall=3,n.userData.offsetX=S.width/2-r,n.userData.offsetZ=S.length/2-n.userData.x/2,n.position.x=n.userData.offsetZ-S.dragOffset[t][0],n.position.z=n.userData.offsetX),n.userData.offsetY=S.height-o/2/S.canvasScale,n.position.y=n.userData.offsetY-S.dragOffset[t][1],n.rotateY(e),S.dragGroup.add(n)):(""==S.textWall&&"textOffset"==t||!1===S.fileLogo&&"logoOffset"==t)&&(t=t,void 0!==S.dragObj[t]&&(S.dragGroup.remove(S.dragObj[t]),S.dragObj[t]={},S.printWall[t]={},S.printWall[t].imageX=0,S.printWall[t].imageY=0,S.dragOffset[t][0]=0,S.dragOffset[t][1]=0))}function s(t){S.controls.enableRotate=!1,t.object.material.opacity=.4}function o(t){S.controls.enableRotate=!0,t.object.material.opacity=0,S.needsUpdate=!0}function i(t){var e=.01;void 0!==t.object.userData&&void 0!==t.object.userData.name&&"textOffset"==t.object.userData.name&&(e=.015),0==t.object.userData.wall?(t.object.position.x=t.object.userData.offsetZ,S.dragOffset[t.object.userData.name][0]=t.object.userData.offsetX-t.object.position.z,S.dragOffset[t.object.userData.name][1]=t.object.userData.offsetY-t.object.position.y,S.dragOffset[t.object.userData.name][0]>S.width-t.object.userData.x/2&&1<S.walls&&(t.object.userData.wall=1,t.object.userData.wallOffset=S.width,t.object.rotateY(Math.PI/2),t.object.userData.offsetX=-S.width/2+e,t.object.userData.offsetZ=-S.length/2+t.object.userData.x/2,t.object.position.x=t.object.userData.offsetZ,t.object.position.z=t.object.userData.offsetX,S.dragOffset[t.object.userData.name][0]=0)):1==t.object.userData.wall?(t.object.position.z=t.object.userData.offsetX,S.dragOffset[t.object.userData.name][0]=-(t.object.userData.offsetZ-t.object.position.x),S.dragOffset[t.object.userData.name][1]=t.object.userData.offsetY-t.object.position.y,S.dragOffset[t.object.userData.name][0]<-t.object.userData.x/2&&0<S.walls?(t.object.userData.wall=0,t.object.userData.wallOffset=0,t.object.rotateY(-Math.PI/2),t.object.userData.offsetX=S.width/2-t.object.userData.x/2,t.object.userData.offsetZ=-S.length/2+e,t.object.position.x=t.object.userData.offsetZ,t.object.position.z=-t.object.userData.offsetX):S.dragOffset[t.object.userData.name][0]>S.length-t.object.userData.x/2&&2<S.walls&&(t.object.userData.wall=2,t.object.userData.wallOffset+=S.length,t.object.rotateY(Math.PI/2),t.object.userData.offsetX=-S.width/2+t.object.userData.x/2,t.object.userData.offsetZ=S.length/2-e-S.depthWall,t.object.position.x=t.object.userData.offsetZ,t.object.position.z=t.object.userData.offsetX)):2==t.object.userData.wall?(t.object.position.x=t.object.userData.offsetZ,S.dragOffset[t.object.userData.name][0]=-(t.object.userData.offsetX-t.object.position.z),S.dragOffset[t.object.userData.name][1]=t.object.userData.offsetY-t.object.position.y,S.dragOffset[t.object.userData.name][0]<-t.object.userData.x/2&&1<S.walls?(t.object.userData.wall=1,t.object.userData.wallOffset-=S.length,t.object.rotateY(-Math.PI/2),t.object.userData.offsetX=-S.width/2+e,t.object.userData.offsetZ=-S.length/2+t.object.userData.x/2,t.object.position.x=-t.object.userData.offsetZ,t.object.position.z=t.object.userData.offsetX):S.dragOffset[t.object.userData.name][0]>S.width-t.object.userData.x/2&&3===S.walls&&(t.object.userData.wall=3,t.object.userData.wallOffset+=S.width,t.object.rotateY(Math.PI/2),t.object.userData.offsetX=S.width/2-e,t.object.userData.offsetZ=S.length/2-t.object.userData.x/2,t.object.position.x=t.object.userData.offsetZ,t.object.position.z=t.object.userData.offsetX)):3==t.object.userData.wall&&(t.object.position.z=t.object.userData.offsetX,S.dragOffset[t.object.userData.name][0]=t.object.userData.offsetZ-t.object.position.x,S.dragOffset[t.object.userData.name][1]=t.object.userData.offsetY-t.object.position.y,S.dragOffset[t.object.userData.name][0]<-t.object.userData.x/2&&2<S.walls&&(t.object.userData.wall=2,t.object.userData.wallOffset-=S.width,t.object.rotateY(-Math.PI/2),t.object.userData.offsetX=-S.width/2+t.object.userData.x/2,t.object.userData.offsetZ=S.length/2-e,t.object.position.x=t.object.userData.offsetZ,t.object.position.z=-t.object.userData.offsetX))}var c=function(){var t=new Object;return t["GO LIGHTBOX 085 200"]="1560042",t["GO LIGHTBOX 100 200"]="1560022",t["GO LIGHTBOX 185 200"]="1560212",t["GO LIGHTBOX 200 200"]="1560062",t["GO LIGHTBOX 085 225"]="1560132",t["GO LIGHTBOX 100 225"]="1560142",t["GO LIGHTBOX 185 225"]="1560222",t["GO LIGHTBOX 200 225"]="1560152",t["GO LIGHTBOX 085 250"]="1560082",t["GO LIGHTBOX 100 250"]="1560032",t["GO LIGHTBOX 185 250"]="1560232",t["GO LIGHTBOX 200 250"]="1560092",t["GO COUNTER L WHITE"]="1560192",t["FUSSPLATTEN EINSEITIG"]="352025",t["TÜR SET"]="352005",t["SYSTEMVERBINDER FLEX"]="352011",t},S={length:4,width:4,height:2,cabin:0,counter:0,style1:0,style2:0,depthWall:.15,walls:2,wallsName:"",countWalls:0,wallColor:"#fed765",wallColor1:"#fed765",wallColor2:"#fed765",opacityWall:.6,limits:{length:[1,6],width:[1,6],height:[2,2.5],walls:[1,3],cabin:[0,1],counter:[0,2],style1:[0,1],style2:[0,1],textSize:[10,1e3]},cabinProps:{width:1.85,depth:.85},counterProps:{width:1,depth:.4,height:1,offset:1},font:"sans-serif",fontColor:"#ff3300",textWall:"",textSize:100,wallpaper:!1,isUpdateWallpaper:!1,fileLogo:!1,logoScale:100,canvasScale:100,isClearDragObj:!1,logoOffset:[0,0],textOffset:[0,0],setLimits:function(){var t,e={walls:[[1,3]],length:[[1,6]],width:[[1,6]],cabin:[[0,1]],counter:[[0,2]]};for(t in 1==this.walls?(e.cabin.push([0,0]),this.length<2&&e.counter.push([0,0]),this.width<2&&e.counter.push([0,1]),0<this.counter&&e.length.push([2,6]),1<this.counter&&e.width.push([2,6]),1<this.counter&&this.length<=2&&this.width<=2&&e.walls.push([1,1]),0<this.counter&&1==this.width&&e.walls.push([1,1])):2==this.walls?((this.width<2||this.length<2)&&e.counter.push([0,0]),2==this.width&&2==this.length&&e.counter.push([0,1]),0<this.counter&&(e.length.push([2,6]),e.width.push([2,6]),this.length<3&&e.walls.push([1,2])),1<this.counter&&(2==this.width&&e.length.push([3,6]),2==this.length&&e.width.push([3,6]),this.length<4&&0==this.cabin&&e.walls.push([1,2])),(this.width<2||this.length<2)&&e.cabin.push([0,0]),0<this.cabin&&(0<this.counter&&(2==this.width&&e.length.push([3,6]),2==this.length&&e.width.push([3,6])),1<this.counter&&(e.length.push([3,6]),e.width.push([4,6]),this.length<3&&e.walls.push([1,2]),this.length<=4&&2==this.width&&e.walls.push([1,2]),3==this.length&&3==this.width&&e.walls.push([1,2])),2==this.width&&2==this.length&&e.counter.push([0,0]),this.width<=3&&this.length<=4&&e.counter.push([0,1]),e.width.push([2,6]),e.length.push([2,6]))):3==this.walls&&((this.width<2||this.length<=2)&&e.counter.push([0,0]),3==this.length&&0==this.cabin&&e.counter.push([0,1]),0<this.counter&&(e.length.push([3,6]),e.width.push([2,6])),1<this.counter&&0==this.cabin&&e.length.push([4,6]),e.length.push([2,6]),(this.width<3||this.length<2)&&(this.width<2||this.length<3)&&e.cabin.push([0,0]),this.length<3&&this.width<3&&e.cabin.push([0,0]),0<this.cabin&&(1<this.counter&&(e.length.push([3,6]),e.width.push([3,6]),2==this.width&&e.length.push([5,6]),3==this.width&&e.length.push([4,6]),3==this.length&&e.width.push([4,6])),this.length<3&&e.cabin.push([0,0]),this.width<4&&e.cabin.push([0,0]),2==this.length&&e.width.push([3,6]),2==this.width&&e.length.push([3,6]),this.length<=4&&2==this.width&&e.counter.push([0,1]),3==this.length&&3==this.width&&e.counter.push([0,1]),e.width.push([2,6]))),0<this.cabin&&(this.length<3&&this.width<3&&e.walls.push([2,2]),e.walls.push([2,3])),this.length<2&&e.walls.push([1,2]),e){this.limits[t][0]=e[t][0][0],this.limits[t][1]=e[t][0][1];for(var a=1;a<e[t].length;a++)this.limits[t][0]<e[t][a][0]&&(this.limits[t][0]=e[t][a][0]),this.limits[t][1]>e[t][a][1]&&(this.limits[t][1]=e[t][a][1])}},checkLimits:function(t,e){return t=("height"==e?parseFloat:parseInt)(t),"length"!=e&&"width"!=e&&void 0!==this.limits[e]&&(t<this.limits[e][0]?t=this.limits[e][0]:t>this.limits[e][1]&&(t=this.limits[e][1])),t},setNewValue:function(){var t;for(t of["counter","cabin","walls"])void 0!==S.limits[t]&&(S[t]<S.limits[t][0]?(S[t]=S.limits[t][0],("walls"==t?$("#wallValueTest"):$("#"+t+"ValueTest")).val(S[t])):S[t]>S.limits[t][1]&&(S[t]=S.limits[t][1],("walls"==t?$("#wallValueTest"):$("#"+t+"ValueTest")).val(S[t])))},setOffButton:function(){var a;for(a of["counter","cabin","walls"])if(void 0!==S.limits[a]){let t=$("input[name="+a+"]").closest(".container-font-size").find(".input-number-decrement"),e=$("input[name="+a+"]").closest(".container-font-size").find(".input-number-increment");t.find(">div.silver-circle").removeClass("silver-circle"),e.find(">div.silver-circle").removeClass("silver-circle"),S[a]==S.limits[a][0]&&t.find(">div").addClass("silver-circle"),S[a]==S.limits[a][1]&&e.find(">div").addClass("silver-circle")}},setState:function(t,e){return"object"==typeof t&&(void 0!==this[t.type]?("width"!=t.type&&"height"!=t.type&&"length"!=t.type||(this.isClearDragObj=!0),"style1"==t.type||"style2"==t.type||"textSize"==t.type||"logoScale"==t.type||"height"==t.type?(this[t.type]=this.checkLimits(t.value,t.type),"function"==typeof e&&e(this[t.type]),this.needsUpdate=!0):"walls"==t.type||"cabin"==t.type||"counter"==t.type||"width"==t.type||"length"==t.type?(this[t.type]=this.checkLimits(t.value,t.type),this.setLimits(),this.setNewValue(),"function"==typeof e&&e(this[t.type]),this.needsUpdate=!0):(this[t.type]=t.value,this.needsUpdate=!0,this.isUpdateWallpaper=!0)):"loadfileLogo"==t.type?(this.fileLogo=t.value,this.needsUpdate=!0,this.isUpdateWallpaper=!0):"setColor"==t.type&&(this[t.name]=t.value,"trimColor"!=t.name&&"rollupColor"!=t.name||(this.isChangeColor=!0),this.needsUpdate=!0),setTimeout(function(){a(S)},400),this.setOffButton()),this},getScene:function(){},arr_cost:[],scene:null,group:null,texture:null,is_find_position:!1,holeGroup:null,baseUrl:"http://bydenis.com/3dconfiguration",baseApiUrl:"https://www.pixlip.com",submitUrl:"http://www.pixlip.com/dvsn/quick-cart/add",controls:!0,needsUpdate:!0,needsUpdateCanvas:!1,printWall:{},dragObj:{},isCreateObj:{},dragOffset:{logoOffset:[0,0],textOffset:[0,0]},printHoles:!1},e=function(o){var i=new D.Group;!0===S.isClearDragObj&&(S.isClearDragObj=!1),function(i){var n=document.createElement("CANVAS"),t=0;0<S.walls&&(t+=S.width),1<S.walls&&(t+=S.length),2<S.walls&&(t+=S.width),t*=S.canvasScale;var e=S.height*S.canvasScale;n.width=t,n.height=e;var r,l=n.getContext("2d");l.fillStyle=S.wallColor1,l.fillRect(0,0,t,e),!1!==S.fileLogo?(r=new Image,(S.wallpaperImage=r).src=S.fileLogo,r.setAttribute("crossOrigin","anonymous"),r.onload=function(t){var e=S.logoScale/S.canvasScale/10,a=r.width*e,s=r.height*e,o="logoOffset";S.printWall[o]={},S.printWall[o].imageX=a,S.printWall[o].imageY=s;e=S.dragOffset.logoOffset[0];void 0!==S.dragObj[o]&&void 0!==S.dragObj[o].userData&&(e+=S.dragObj[o].userData.wallOffset),l.drawImage(this,parseInt(e*S.canvasScale),parseInt(S.dragOffset[o][1]*S.canvasScale),a,s),h(l),S.wallpaper=n,i()}):(h(l),S.wallpaper=n,i())}(function(){var t,e,a,s=0;S.isCreateObj.logoOffset=!0,S.isCreateObj.textOffset=!0,S.wallsName="",0<S.walls&&(e=0,t=-S.depthWall,1<S.walls&&(e=S.depthWall,t=-S.depthWall/2),r(i,S.width-e,S.height,-S.length/2-S.depthWall/2,t,Math.PI/2,s),void 0!==S.dragObj.logoOffset&&!S.isCreateObj.logoOffset||d("logoOffset",Math.PI/2),void 0!==S.dragObj.textOffset&&!S.isCreateObj.textOffset||d("textOffset",Math.PI/2),s+=S.width-e,S.wallsName="I"),1<S.walls&&(a=0,2<S.walls&&(a=S.depthWall),r(i,S.length-S.depthWall-a,S.height,-S.depthWall/2-a/2,-S.width/2-S.depthWall/2,0,s),void 0!==S.dragObj.logoOffset&&!S.isCreateObj.logoOffset||d("logoOffset",0),void 0!==S.dragObj.textOffset&&!S.isCreateObj.textOffset||d("textOffset",0),s+=S.length-S.depthWall-a,S.wallsName="L"),2<S.walls&&1<S.length&&(r(i,S.width-S.depthWall,S.height,S.length/2-S.depthWall/2-S.depthWall,-S.depthWall/2,-Math.PI/2,s),void 0!==S.dragObj.logoOffset&&!S.isCreateObj.logoOffset||d("logoOffset",-Math.PI/2),void 0!==S.dragObj.textOffset&&!S.isCreateObj.textOffset||d("textOffset",-Math.PI/2),s+=S.width-S.depthWall,S.wallsName="U"),S.isUpdateWallpaper=!1,function(t){if(0<S.cabin&&1<S.walls&&1<S.width&&1<S.length&&(S.walls<3||2<S.width||2<S.length)){var e=S.cabinProps.width;S.length<=3&&(e=.85);var a=!1;2==S.length&&3==S.walls&&(e=.85,a=!0);var s=new D.BoxBufferGeometry(e-.01,S.height,S.depthWall),o=new D.MeshStandardMaterial({color:16777215});new D.MeshStandardMaterial({color:16701285}).color=new D.Color(S.wallColor1);const d=new D.TextureLoader;var i=new D.MeshBasicMaterial({map:d.load("img/musterTexturPixlipgo.jpg")});1<(l=2448*e/(3264*S.height))?(h=3264*S.height/(2448*e),i.map.repeat.set(l=1,h),i.map.offset.y=(h-1)/2*-1):(l=2448*e/(3264*S.height),i.map.repeat.set(l,h=1),i.map.offset.x=(l-1)/2*-1);var n=new D.Mesh(s,[o,o,o,o,i,i]),r=new D.BoxHelper(n,4342338);if(n.add(r),n.position.y=S.height/2,n.position.x=-S.length/2+e/2,n.position.z=-S.width/2+S.cabinProps.depth+S.depthWall/2,1.85<=e&&y(n,0,S.height),y(n,e/2-.2,S.height),y(n,-e/2+.2,S.height),n.userData=P(e,S.height,.85==e?1:1.5),n.name=n.userData.name,n.isLightBox=!0,t.add(n),!0===a){s=new D.BoxBufferGeometry(e-.01,S.height,S.depthWall),o=new D.MeshStandardMaterial({color:16777215});new D.MeshStandardMaterial({color:16701285}).color=new D.Color(S.wallColor1);const c=new D.TextureLoader;var l,h,i=new D.MeshBasicMaterial({map:c.load("img/musterTexturPixlipgo.jpg")});1<(l=2448*e/(3264*S.height))?(h=3264*S.height/(2448*e),i.map.repeat.set(l=1,h),i.map.offset.y=(h-1)/2*-1):(l=2448*e/(3264*S.height),i.map.repeat.set(l,h=1),i.map.offset.x=(l-1)/2*-1);n=new D.Mesh(s,[o,o,o,o,i,i]),r=new D.BoxHelper(n,4342338);n.add(r),n.position.y=S.height/2,n.position.x=-S.length/2+e/2*3,n.position.z=-S.width/2+S.cabinProps.depth+S.depthWall/2,n.userData=P(e,S.height,0),n.name=n.userData.name,n.isLightBox=!0,t.add(n)}else{n=new D.BoxGeometry(S.cabinProps.depth-.01,S.height,S.depthWall),o=new D.Mesh(n,[o,o,o,o,i,i]),i=new D.BoxHelper(o,4342338);o.add(i),o.position.y=S.height/2,o.position.x=-S.length/2+e+S.depthWall/2,o.position.z=-S.width/2+S.cabinProps.depth/2,o.rotateY(Math.PI/2),o.userData=P(S.cabinProps.depth,S.height,0),o.name=o.userData.name,o.isLightBox=!0,t.add(o)}}}(i),e=i,a=new D.BoxBufferGeometry(S.length,.01,S.width),s=new D.MeshStandardMaterial({color:4342338}),(s=new D.Mesh(a,s)).position.y=-.005,s.position.z=-S.depthWall,s.position.x=-S.depthWall,e.add(s),s=i,1<S.length&&(1==S.walls?(0<S.counter&&s.add(l(S.length/2-S.counterProps.depth/2,-S.width/2+S.counterProps.width/2,Math.PI/2)),2==S.counter&&s.add(l(S.length/2-S.counterProps.depth/2,S.width/2-S.counterProps.width/2,Math.PI/2))):2==S.walls?1==S.counter?s.add(l(S.length/2-S.counterProps.width/2,S.width/2-S.counterProps.width/2,Math.PI/4)):2==S.counter&&(0<S.cabin?1<S.width&&1<S.length&&(2==S.length?s.add(l(-S.length/2+S.counterProps.width/2+S.depthWall+.01,S.width/2-S.counterProps.depth/2,0)):s.add(l(S.length/2-S.counterProps.width/2-S.depthWall+.01-1,S.width/2-S.counterProps.depth/2,0)),2==S.width?s.add(l(S.length/2-S.counterProps.depth/2,-S.width/2+S.counterProps.width/2+S.depthWall+.01,Math.PI/2)):s.add(l(S.length/2-S.counterProps.depth/2,S.width/2-S.counterProps.width/2-S.depthWall-.01-.65,Math.PI/2))):(s.add(l(S.length/2-S.counterProps.depth/2,-S.width/2+S.counterProps.width/2+S.depthWall+.01,Math.PI/2)),s.add(l(-S.length/2+S.counterProps.width/2+S.depthWall+.01,S.width/2-S.counterProps.depth/2,0)))):3==S.walls&&(0<S.cabin?(0<S.counter&&s.add(l(S.length/2-S.counterProps.width/2-S.depthWall-.01,S.width/2-S.counterProps.depth/2,0)),2==S.counter&&(3==S.length&&3<S.width?s.add(l(S.length/2-S.counterProps.depth/2-S.depthWall-.01-S.counterProps.width,S.width/2-S.counterProps.width/2-S.counterProps.depth,Math.PI/2)):3<S.length&&s.add(l(S.length/2-S.counterProps.width/2-S.depthWall-.01-S.counterProps.width,S.width/2-S.counterProps.depth/2,0)))):(0<S.counter&&s.add(l(-S.length/2+S.counterProps.width/2+S.depthWall+.01,S.width/2-S.counterProps.depth/2,0)),2==S.counter&&s.add(l(S.length/2-S.counterProps.width/2-S.depthWall-.01,S.width/2-S.counterProps.depth/2,0))))),S.scene.remove(S.group),S.scene.add(i),S.group=i,S.needsUpdate=!1,o()})};function p(i,n){!async function(t,e){const a=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return a.json()}(i.baseApiUrl+"/api/oauth/token",{client_id:"administration",grant_type:"password",scopes:"read",username:"Kaman",password:"Kaman_Kaman"}).then(t=>{if(void 0!==t.access_token){var a=t.access_token,s=c(),o=Object.keys(s).length;for(let e in s)!async function(t,e=""){const a=await fetch(t,{method:"GET",headers:{"Content-Type":"application/json",Authorization:e}});return a.json()}(i.baseApiUrl+"/api/product?filter[productNumber]="+s[e],a).then(t=>{i.arr_cost[e]=t.data[0].attributes.price[0].net,0==--o&&n()})}})}var u,f,g,w;class b{static createButton(n,r={}){const l=document.createElement("button");function e(){l.style.display="",l.style.cursor="auto",l.style.left="calc(50% - 75px)",l.style.width="150px",l.onmouseenter=null,l.onmouseleave=null,l.onclick=null}function t(t){t.style.position="absolute",t.style.bottom="20px",t.style.padding="12px 6px",t.style.border="1px solid #0071E3",t.style.borderRadius="4px",t.style.background="#0071E3",t.style.color="#fff",t.style.font="normal 13px sans-serif",t.style.textAlign="center",t.style.opacity="0.5",t.style.outline="none",t.style.zIndex="999"}if("xr"in navigator)return l.id="ARButton",l.style.display="none",t(l),navigator.xr.isSessionSupported("immersive-ar").then(function(t){t?function(){if(void 0===r.domOverlay){const s=document.createElement("div");s.style.display="none",document.body.appendChild(s);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",38),o.setAttribute("height",38),o.style.position="absolute",o.style.right="20px",o.style.top="20px",o.addEventListener("click",function(){e.end()}),s.appendChild(o);const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),i.setAttribute("stroke","#fff"),i.setAttribute("stroke-width",2),o.appendChild(i),void 0===r.optionalFeatures&&(r.optionalFeatures=[]),r.optionalFeatures.push("dom-overlay"),r.domOverlay={root:s}}let e=null;async function t(t){t.addEventListener("end",a),n.xr.setReferenceSpaceType("local"),await n.xr.setSession(t),l.textContent="STOP AR",r.domOverlay.root.style.display="",e=t}function a(){e.removeEventListener("end",a),l.textContent="START AR",r.domOverlay.root.style.display="none",e=null}l.style.display="",l.style.cursor="pointer",l.style.left="calc(50% - 50px)",l.style.width="100px",l.textContent="START AR",l.onmouseenter=function(){l.style.opacity="1.0"},l.onmouseleave=function(){l.style.opacity="0.5"},l.onclick=function(){null===e?navigator.xr.requestSession("immersive-ar",r).then(t):e.end()}}():(e(),l.textContent="AR NOT SUPPORTED")}).catch(function(t){e(),console.warn("Exception when trying to call xr.isSessionSupported",t),l.textContent="AR NOT ALLOWED"}),l;{const a=document.createElement("a");return!1===window.isSecureContext?(a.href=document.location.href.replace(/^http:/,"https:"),a.innerHTML="WEBXR NEEDS HTTPS"):(a.href="https://immersiveweb.dev/",a.innerHTML="WEBXR NOT AVAILABLE"),a.style.left="calc(50% - 90px)",a.style.width="180px",a.style.textDecoration="none",t(a),a}}}function m(){!0===S.needsUpdate?e(function(){j()}):j()}function j(t,e){w.update(),e&&(!1===hitTestSourceRequested&&function(){const e=g.xr.getSession();e.requestReferenceSpace("viewer").then(function(t){e.requestHitTestSource({space:t}).then(function(t){hitTestSource=t})}),e.addEventListener("end",function(){hitTestSourceRequested=!1,hitTestSource=null,referenceSpace=null}),hitTestSourceRequested=!0}(),hitTestSource&&function(t){var e=t.getHitTestResults(hitTestSource);if(e.length){t=g.xr.getReferenceSpace();const a=e[0];t=a.getPose(t);reticle.visible=!0,reticle.matrix.fromArray(t.transform.matrix)}else reticle.visible=!1}(e)),g.render(f,u),requestAnimationFrame(m)}t.init=function(){var t=document.getElementById("canvas-standgenerator");(g=new D.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),g.setSize(t.clientWidth,t.clientHeight),u=new D.PerspectiveCamera(75,t.clientWidth/t.clientHeight,.1,2e3),(S.camera=u).position.y=.7*S.height,u.position.z=.9*S.length,u.position.x=.9*S.width,f=new D.Scene,S.scene=f;var e=b.createButton(g,{requiredFeatures:["hit-test"]});console.log(e),g.xr.enabled=!0,function(){var t=new D.Mesh(new D.RingBufferGeometry(.15,.2,32).rotateX(-Math.PI/2),new D.MeshBasicMaterial);t.matrixAutoUpdate=!1,t.visible=!1,f.add(t)}(),window.addEventListener("resize",function(){u.aspect=t.clientWidth/t.clientHeight,u.updateProjectionMatrix(),g.setSize(t.clientWidth,t.clientHeight)},!1),t.appendChild(g.domElement),document.body.appendChild(e),function(t){var e=new D.SpotLight(16777187,.2);e.position.set(-200,50,200),e.angle=Math.PI,e.penumbra=!0,t.add(e);e=new D.SpotLight(16777215,.2);e.position.set(200,50,-200),e.angle=Math.PI,e.penumbra=!0;e=new D.SpotLight(16777215,.5);e.position.set(200,50,200),e.angle=Math.PI,e.penumbra=!0,t.add(e);e=new D.SpotLight(16777215,.4);e.position.set(-30,300,100),e.penumbra=!0,e.angle=Math.PI/4,t.add(e);e=new D.AmbientLight(12176895,.4);e.position.set(5e3,5e3,5e3),t.add(e)}(f),(w=new D.OrbitControls(u,g.domElement)).screenSpacePanning=!0,w.enableDamping=!0,w.dampingFactor=.08,w.enableZoom=!0,w.minPolarAngle=Math.PI/4,w.maxPolarAngle=Math.PI/2,w.minDistance=4,w.maxDistance=12,w.enablePan=!1,w.rotateSpeed=1.5,S.controls=w,e=new D.Group,S.dragGroup=e,S.dragControls=new D.DragControls([S.dragGroup],u,g.domElement),S.dragControls.transformGroup=!1,S.dragControls.addEventListener("dragstart",s),S.dragControls.addEventListener("dragend",o),S.dragControls.addEventListener("drag",i),f.add(e),p(S,function(){a(S)}),m()},t.state=S,t.submit=function(){var t=S.submitUrl+n(S).getCart;window.open(t,"_blank")},Object.defineProperty(t,"__esModule",{value:!0})});